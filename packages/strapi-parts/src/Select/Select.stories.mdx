<!--- Select.stories.mdx --->

import { useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { ArgsTable } from '@storybook/addon-docs';
import AddIcon from '@strapi/icons/AddIcon';
import { Select } from './Select';
import { Option } from './Option';
import { Stack } from '../Stack';

<Meta title="Design System/Molecules/Select" component={Select} />

# Select

Selects are fields that displays to users a list of options via a PopOver component. They allow users to make a single or multiple selections from this list. The selected option(s) of a Select need(s) to be stored whether it's single or a multi. Selects are part of forms. 

**Best practices**

- A select is part of a form.
- The usage of Menu component is possible if the user needs to make a single choice.
- Use Menu component for small spaces. When there is more space, use a Select.
- Try to have a sort logic in the popover of the menu.
- In a multi select component, the "0 currently selected" text, can be changed but it will never have a placeholder style.
- Use sentence case into a Select and straight-to-the-point sentences.
- An option should be written on a single line.


## Usage

A Select allow users to make a selection from a list.

### Default Select

The default Select. 

<Canvas>
  <Story name="base">
    {() => {
      const [value, setValue] = useState();
      const [error, toggleError] = useState();
      const [disabled, toggleDisabled] = useState();
      return (
        <Stack size={11}>
          <h2>Current value is {value}</h2>
          <Select
            id="select1"
            label="Choose your meal"
            placeholder="Your example"
            hint="Description line"
            onClear={() => setValue(undefined)}
            clearLabel="Clear the meal"
            error={error}
            value={value}
            onChange={setValue}
            disabled={disabled}
            startIcon={<AddIcon />}
          >
            <Option value={'pizza'}>Pizza</Option>
            <Option value={'hamburger'}>Hamburger</Option>
            <Option value={'bagel'}>Bagel</Option>
          </Select>
          <button onClick={() => toggleError((s) => (s ? undefined : 'An error occured'))}>Show the error state</button>
          <button onClick={() => toggleDisabled((s) => !s)}>Show the disabled state</button>
        </Stack>
      );
    }}
  </Story>
</Canvas>


## Select multi

A multi Select allow users to make multiple selections from a list. Prefer using a multi-Select when the amount of selection options is superior to 4 and there is no need to have them visible. 

In a multi select component, the "0 currently selected" text, can be changed but it will never have a placeholder style.

<Canvas>
  <Story name="multi">
    {() => {
      const [values, setValues] = useState([]);
      const [error, toggleError] = useState();
      const [disabled, toggleDisabled] = useState();
      const onValueChange = (newValue) =>
        setValues((s) => (s.includes(newValue) ? s.filter((x) => x !== newValue) : [...s, newValue]));
      return (
        <Stack size={11}>
          <h2>Current value is {values.join(', ')}</h2>
          <Select
            id="select1"
            label="Choose your meal"
            placeholder="Your example"
            onClear={() => setValues([])}
            hint="Description line"
            clearLabel="Clear the meal"
            error={error}
            value={values}
            onChange={onValueChange}
            disabled={disabled}
            customizeContent={(values) => `${values.length} currently selected`}
            multi
          >
            <Option value={'pizza'}>Pizza</Option>
            <Option value={'hamburger'}>Hamburger</Option>
            <Option value={'bagel'}>Bagel</Option>
          </Select>
          <button onClick={() => toggleError((s) => (s ? undefined : 'An error occured'))}>Show the error state</button>
          <button onClick={() => toggleDisabled((s) => !s)}>Show the disabled state</button>
        </Stack>
      );
    }}
  </Story>
</Canvas>


## Select multi with tags

A multi Select allow users to visually select multiple options from a list. Prefer using a multi-Select with tags when the amount of selection options is less than 4 and there is a need to have them visible. 

<Canvas>
  <Story name="multi-withTags">
    {() => {
      const [values, setValues] = useState([]);
      const [error, toggleError] = useState();
      const [disabled, toggleDisabled] = useState();
      const onValueChange = (newValue) =>
        setValues((s) => (s.includes(newValue) ? s.filter((x) => x !== newValue) : [...s, newValue]));
      return (
        <Stack size={11}>
          <h2>Current value is {values.join(', ')}</h2>
          <Select
            id="select1"
            label="Choose your meal"
            placeholder="Your example"
            onClear={() => setValues([])}
            hint="Description line"
            clearLabel="Clear the meal"
            error={error}
            value={values}
            onChange={onValueChange}
            disabled={disabled}
            customizeContent={(values) => `${values.length} currently selected`}
            multi
            withTags
          >
            <Option value={'pizza'}>Pizza</Option>
            <Option value={'hamburger'}>Hamburger</Option>
            <Option value={'bagel'}>Bagel</Option>
            {Array(20)
              .fill(null)
              .map((_, i) => (
                <Option key={i} value={`${i}`}>
                  Another option
                </Option>
              ))}
          </Select>
          <button onClick={() => toggleError((s) => (s ? undefined : 'An error occured'))}>Show the error state</button>
          <button onClick={() => toggleDisabled((s) => !s)}>Show the disabled state</button>
        </Stack>
      );
    }}
  </Story>
</Canvas>


## Select size S

Select should be scaled down if they aimed to be placed in a smaller portions of a page.

<Canvas>
  <Story name="size-S">
    {() => {
      const [values, setValues] = useState([]);
      const onValueChange = (newValue) =>
        setValues((s) => (s.includes(newValue) ? s.filter((x) => x !== newValue) : [...s, newValue]));
      return (
        <Stack size={11}>
          <Select
            id="select1"
            label="Choose your meal"
            placeholder="Your example"
            onClear={() => setValues([])}
            hint="Description line"
            clearLabel="Clear the meal"
            error={undefined}
            value={values}
            onChange={onValueChange}
            disabled={false}
            customizeContent={(values) => `${values.length} currently selected`}
          >
            <Option value={'pizza'}>Pizza</Option>
            <Option value={'hamburger'}>Hamburger</Option>
            <Option value={'bagel'}>Bagel</Option>
          </Select>
        </Stack>
      );
    }}
  </Story>
</Canvas>


## Props

<ArgsTable of={Select} />