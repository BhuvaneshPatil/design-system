<!--- Field.stories.mdx --->

import { useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import Password from '@strapi/icons/Password';
import HelpIcon from '@strapi/icons/HelpIcon';
import { FieldLabel } from './FieldLabel';
import { FieldHint } from './FieldHint';
import { FieldError } from './FieldError';
import { FieldInput } from './FieldInput';
import { Field } from './Field';
import { Row } from '../Row';
import { Box } from '../Box';
import { Stack } from '../Stack';
import { Tooltip } from '../Tooltip';
import { FieldAction } from './FieldAction';

<Meta title="Design System/Molecules/Field" component={Field} />

# Field

This is the doc of the `Field` component

## Base

The simplest representation of the Field components, no description, no error, no noise.

<Canvas>
  <Story name="base">
    <Field name="email">
      <Stack size={1}>
        <FieldLabel>Email</FieldLabel>
        <FieldInput type="text" placeholder="Placeholder" value={''} onChange={() => {}} />
      </Stack>
    </Field>
  </Story>
</Canvas>

## with description

An example of the Field components with a description

<Canvas>
  <Story name="with description">
    <Field name="email" hint="Description line">
      <Stack size={1}>
        <FieldLabel>Email</FieldLabel>
        <FieldInput type="text" placeholder="Placeholder" value={''} onChange={() => {}} />
        <FieldHint />
      </Stack>
    </Field>
  </Story>
</Canvas>

## with error

An example of the Field components with an error

<Canvas>
  <Story name="with error">
    <Field name="password" error={'Password is too short'}>
      <Stack size={1}>
        <FieldLabel>Password</FieldLabel>
        <FieldInput type="password" placeholder="Placeholder" value={''} onChange={() => {}} />
        <FieldHint />
        <FieldError />
      </Stack>
    </Field>
  </Story>
</Canvas>

## Disabled field

An example of the Field components in a disabled state:

<Canvas>
  <Story name="disabled">
    <Field name="password" hint="Description line">
      <Stack size={1}>
        <FieldLabel>Password</FieldLabel>
        <FieldInput placeholder="Placeholder" value={'Hello world'} disabled={true} onChange={() => {}} />
        <FieldHint />
        <FieldError />
      </Stack>
    </Field>
  </Story>
</Canvas>

## Most complex input

This is the most complex input that can be built with the Field components:

<Canvas>
  <Story name="most complex input">
    {() => {
      const [email, setEmail] = useState('');
      return (
        <Box padding={8}>
          <Field name="password" hint="Description line" error={email.length > 5 ? 'Email is too short' : undefined}>
            <Stack size={1}>
              <Row>
                <FieldLabel>Password</FieldLabel>
                <Box paddingLeft={2}>
                  <Tooltip description="Content of the tooltip">
                    <button
                      aria-label="Information about the email"
                      style={{ border: 'none', padding: 0, background: 'transparent' }}
                    >
                      <HelpIcon aria-hidden={true} />
                    </button>
                  </Tooltip>
                </Box>
                <a href="#" style={{ marginLeft: 'auto' }}>
                  Details
                </a>
              </Row>
              <FieldInput
                placeholder="example@domain.com"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                startAction={
                  <FieldAction label="Show password">
                    <Password />
                  </FieldAction>
                }
                endAction={
                  <FieldAction label="Show password">
                    <Password />
                  </FieldAction>
                }
              />
              <FieldHint />
              <FieldError />
            </Stack>
          </Field>
        </Box>
      );
    }}
  </Story>
</Canvas>
